
## Nexus Channel Core

### Resource Type Registry

*A full list of resource type specifications like the ones mentioned below
can be found in the Nexus Channel Core [Resource Type Registry](resource_type_registry.md).*

### Nexus Channel Core: Actionable Interoperability

Nexus Channel Core allows devices to share arbitrary data with other devices
by exposing that data as a set of 'resources'. For example, a Solar Home
System (SHS) might host a [battery](resource_types/core/101-battery/redoc_wrapper.md) resource to expose information
about its primary battery capacity and health. That same system might also host
an [energy generation](resource_types/core/energy/102-generation/redoc_wrapper.md) resource,
exposing how it is powered (solar, AC, etc), instantaneous power being generated,
and cumulative energy generated by the source over time.

Additionally, the SHS might provide an [energy consumption](resource_types/core/energy/103-consumption/redoc_wrapper.md)
resource, exposing the total power draw of its loads, as well as how that power
is split across different loads. If the SHS is able to log or report data,
it might store this information in a [sample log](resource_types/core/301-samplelog/redoc_wrapper.md) resource,
allowing other application logic to make decisions based on stored
load data.

An appliance (like a freezer) might expose a [demand response](resource_types/core/drlc.oas.yaml)
resource, enabling coordinated energy management with an 'energy management'
device (like the SHS above) by enabling the concept of 'requested' and
'granted' power consumption amounts via resource properties. A freezer might
lower its requested power at night (when the temperature is lower), allowing
the system controller to 'free up' more energy for lighting or entertainment
uses in the evening.

Or, consider the case of a solar home system with expansion battery packs. Each
of the battery packs might expose resources sharing its *own* battery state, while
also allowing another 'authorized' device to modify parameters like minimum
safe battery capacity in a standard way.

Each of the above examples describes an instance of a well-defined "Resource
Type" as implemented on a specific device. These "Resource Types" are how
devices implementing Nexus Channel Core resources are able to monitor and control
each other *without* custom application logic for each new device. Independent
of *how* a device developer implements the 'battery' resource, for instance,
the same values are present (capacity, voltage, etc) and are accessed using
the same property names and data types. In this way, devices only need to know
*what* standard resource types other devices have implemented, then refer to
the publicly available specifications for those resource types to determine how
to read or modify the state of another device.

### Nexus Channel Core: Built on Industry Standards

Nexus Channel Core is a *subset* of the [Open Connectivity Foundation (OCF) Specification](https://openconnectivity.org/specs/OCF_Core_Specification_v2.1.1.pdf), an industry and ISO/IEC standard [(30118-1:2018)](https://www.iso.org/standard/53238.html). OCF specifies a way to define resource models in
a non-proprietary, highly-interoperable format. It uses the following standards to model resource types:

* [OCF Resource Type Specification](https://openconnectivity.org/specs/OCF_Resource_Type_Specification_v2.1.2.pdf) -
    Independent of any implementation details or code, every Nexus Channel Core
    resource type is fully defined by an OpenAPI spec file that is compliant with
    the OCF Resource Type specification. This ensures that every property exposed
    by the resource is specified with a sufficient level of detail (type, name,
    valid range, purpose) to enable developers to implement the spec on a device,
    while also clarifying how to interact with other devices which implement
    that resource type.

* [RFC 7252 Constrained Application Protocol](https://coap.technology/) (CoAP) -
    The OCF Core specification explains how to transmit data between devices
    using CoAP protocol and simple verbs. Nexus Channel Core selects a subset
    of CoAP options and configurations which simplify use on resource-limited
    devices, and enable faster 'time to implementation' for device
    development teams.

* [RFC 7049 Concise Binary Object Representation](https://cbor.io/) (CBOR) - When
    interacting with a resource hosted on another device, the resource properties
    are represented using CBOR. When modelling a new resource type, the properties
    are annotated with their corresponding CBOR data types.
    Nexus Channel Core provides further restrictions beyond the OCF specification
    to simplify CBOR parsing and reduce data footprint for use on [Class 0](https://tools.ietf.org/html/rfc7228#section-3)
    embedded devices.

### Nexus Channel Core: Specifications

To see exactly what subset of CoAP, CBOR, and OCF that Nexus Channel Core
supports, please see the following specifications:

* [Nexus Channel Core CoAP Messaging Spec](coap_format_spec.md)
* [Nexus Channel Core CBOR/Resource Type Creation Spec](resource_type_spec.md)

**To submit a new resource type for inclusion and receive a resource type
registry value**, please follow the instructions in the "Nexus Channel Core
CBOR/Resource Type Creation Spec".

Autogeneration of sample source code (in C) from YAML resource type definitions
may be possible in the future, and the `x-example` fields included in resource
type YAML specifications are meant to support this future possibility.

### Nexus Channel Core: Reference Implementation

A compliant reference implementation is available in the [`nexus-embedded`](https://github.com/angaza/nexus-embedded/tree/master/nexus)
repository.
